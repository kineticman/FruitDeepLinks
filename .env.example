# ==========================================
# FruitDeepLinks Configuration (.env.example)
# ==========================================
# Copy this file to ".env" and edit the values as needed.
#
# QUICK SETUP: The most common things to change are:
#   - SERVER_URL
#   - FRUIT_HOST_PORT
#   - CHANNELS_DVR_IP
#   - TZ
#   - FRUIT_LANES / FRUIT_LANE_START_CH (optional)
#   - CDVR_DVR_PATH (if using Event-Level Deeplinks - see below)
# ------------------------------------------
# 1) Basic Network & Channels DVR Settings
# ------------------------------------------
# URL where YOU will reach FruitDeepLinks from your LAN.
# Use your server's LAN IP and the host port from FRUIT_HOST_PORT.
SERVER_URL=http://192.168.86.80:6655

# Host port where Docker will expose the web UI & API.
# If another service already uses 6655, change this (e.g. 6767).
FRUIT_HOST_PORT=6655

# Channels DVR Integration (optional, for automatic source refresh)
# This should be the IP/hostname of your Channels DVR server (often different than SERVER_URL).
CHANNELS_DVR_IP=192.168.86.72
CHANNELS_SOURCE_NAME=fruitdeeplinks

# Timezone (adjust for your location)
TZ=America/New_York

# ------------------------------------------
# 1b) Chrome Capture (BETA)
# ------------------------------------------
# OPTIONAL: Enables Chrome Capture lane output (multisource_lanes_chrome.m3u)
# CC_SERVER = host/IP where Chrome Capture is running
# CC_PORT   = port Chrome Capture listens on (often 8080)
CC_SERVER=localhost
CC_PORT=8080

# ------------------------------------------
# 2) Lane Configuration
# ------------------------------------------
# Most people only need to touch FRUIT_LANES and FRUIT_LANE_START_CH.
FRUIT_LANES=50
FRUIT_LANE_START_CH=9000
FRUIT_DAYS_AHEAD=7
FRUIT_PADDING_MINUTES=45
FRUIT_PLACEHOLDER_BLOCK_MINUTES=60
FRUIT_PLACEHOLDER_EXTRA_DAYS=5

# ------------------------------------------
# 3) Event-Level Deeplinks (tvOS reliable; Android testing in progress)
# ------------------------------------------
# Channels DVR only supports deeplinks per CHANNEL, not per PROGRAM.
# Event-Level Deeplinks is a workaround that launches the correct streaming app
# for the EVENT you clicked.
#
# IMPORTANT: This requires FILESYSTEM access to your Channels DVR "DVR" folder
# on the same host that runs Channels DVR (or a network-mounted path to it).
# FruitDeepLinks needs read/write access to:
#   <DVR>/Imports/fruitdeeplinks/
#
# SETUP (high level):
# 1) Set CDVR_DVR_PATH below to your DVR base directory (the folder that contains Imports/)
# 2) Import lanes into Channels DVR:
#    - M3U:  http://your-fruitdeeplinks-ip:6655/out/multisource_lanes.m3u
#    - XML:  http://your-fruitdeeplinks-ip:6655/out/multisource_lanes.xml
# 3) Tune a Fruit Lane channel. FruitDeepLinks will update lane#.strmlnk and trigger app launch.
#
# Leave blank to disable Event-Level Deeplinks.
#
# Examples (host paths):
#   Linux:    /mnt/storage/DVR
#   macOS:    /Volumes/Storage/DVR
#   Windows:  C:/DVR        (use forward slashes)
#   Synology: /volume1/DVR
#
CDVR_DVR_PATH=

# Advanced (usually leave defaults)
# Uses CHANNELS_DVR_IP from section 1 for server communication
CDVR_SERVER_PORT=8089
CDVR_API_PORT=57000

# ------------------------------------------
# 4) Scraper Settings (usually leave as-is)
# ------------------------------------------
# Run AppleTV scraper headless (no visible browser window).
HEADLESS=true

# For debugging only; normally leave false.
NO_NETWORK=false

# ------------------------------------------
# 5) Paths & Logging (advanced, rarely changed)
# ------------------------------------------
# Database path inside the container.
FRUIT_DB_PATH=/app/data/fruit_events.db

# Logging config
LOG_LEVEL=INFO
LOG_DIR=/app/logs

# Output directory inside the container
OUT_DIR=/app/out

# ------------------------------------------
# 6) Auto-refresh & Rate Limits (advanced)
# ------------------------------------------
# Auto-refresh (also controllable via web UI)
AUTO_REFRESH_ENABLED=true
AUTO_REFRESH_TIME=02:30

# Rate limiting for multi_scraper
SCRAPER_TERM_TIME_LIMIT=180
SCRAPER_GLOBAL_TIME_LIMIT=0

# ------------------------------------------
# 7) Internal Server Settings (do NOT change unless you know why)
# ------------------------------------------
# PORT is the port INSIDE the container (Flask listens here).
# HOST is the bind address inside the container.
# These must stay in sync with the Dockerfile / healthcheck.
PORT=6655
HOST=0.0.0.0

